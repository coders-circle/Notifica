{% extends 'base.html' %}
{% load classroom_tags %}
{% load staticfiles %}

{% block title %}
{{class}}
{% endblock %}

{% block head %}
<link href="{% static 'css/class.css' %}" type="text/css" rel="stylesheet">
<script src="{% static 'js/class.js' %}"></script>
<script>
    var class_profile = {{class.profile.pk}};
    var class_pk = {{class.pk}};
</script>
{% endblock %}

{% block body %}
<div class="section" id="header-section">
    <div class="container">
        <div class="menu">
            <a href="{% url 'home' %}"><i class="fa fa-home"></i>Home</a>
        </div>
        <div id="class-info">
            <img class="logo avatar" src="/media/{{class.profile.avatar}}">
            <div class="title">{{class.class_id}}</div>
            <div class="extra">{{class.description}}</div>
        </div>
    </div>
</div>
<div class="section" id="body-section">
    {# if user|class.profile.pk #}
    {% if user_in_class %}
        {% include 'classroom/card-teacher-template.html' %}
        {% include 'classroom/card-subject-template.html' %}
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <div id="content-block">
                        <div id="tabs">
                            <a href="#" class="tab active" data-target="news-feed">News feed</a>
                            <a href="#" class="tab" data-target="teachers">Teachers</a>
                            <a href="#" class="tab" data-target="students">Students</a>
                            <a href="#" class="tab" data-target="subjects">Subjects</a>
                        </div>
                        <div id="tab-contents">
                            <div class="tab-content active" id="news-feed">
                                <div id="add-post-form-container">
                                    <a class="header" href="#">
                                        <span class="header-label">Add new post</span><i class="fa fa-chevron-down"></i>
                                    </a>
                                    <form id="add-post-form" class="form-add-post">
                                        {% csrf_token %}
                                        <input type="text" class="input-neat" id="post-title" placeholder="Title">
                                        <textarea class="input-neat" id="post-content" rows="3" placeholder="Content"></textarea>
                                        <input type="submit" class="btn btn-default">
                                    </form>
                                </div>
                            </div>
                            <div class="tab-content hidden" id="teachers">
                                <div class="row">
                                    <div class="animation-loading" id="teachers-loading-animation"></div>
                                    <div class="col-sm-6 even-container">
                                    </div>
                                    <div class="col-sm-6 odd-container">
                                    </div>
                                </div>
                            </div>

                            <div class="tab-content hidden" id="students">
                                <table class="table-students">
                                </table>
                            </div>
                            <div class="tab-content hidden" id="subjects">
                                <div class="col-sm-6 even-container">
                                </div>
                                <div class="col-sm-6 odd-container">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div id="quick-task-block">
                        <div id="tasks">
                            <a class="title">Quick Tasks</a>
                            <a href="#" class="task"><i class="fa fa-calendar-check-o"></i> Take Attendence</a>
                            <a href="#" class="task"><i class="fa fa-plus"></i> Add an Assignment</a>
                            <a href="#" class="task"><i class="fa fa-user-plus"></i> Add a Student</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <div class="container">
            <div id="join-request">
                <div class="info">
                    {% if request_sent %}
                    Join request has been sent. Please await your response.
                    {% else %}
                    To see the content of this classroom, you must be a member.
                    {% endif %}
                </div>
                {% if request_sent %}
                {% else %}
                <form method="post">
                    {% csrf_token %}
                    <input class="btn btn-default" name="join-request" type="submit" value="Send a join request">
                </form>
                {% endif %}
            </div>
        </div>
    {% endif %}
</div>
{% include 'footer.html' %}
{% endblock %}
