{% extends "base.html" %}
{% load staticfiles %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'css/routine.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/selectize.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/selectize.bootstrap3.css' %}">
<script src="{% static 'js/routine.js' %}"></script>
<!-- <script src="{% static 'js/angular.min.js' %}"></script> -->
<script src="{% static 'js/selectize.js' %}"></script>
<script>
jQuery(document).ready(function($) {
    $('#test').selectize({
        valueField: 'id',
        labelField: 'username',
        searchField: ['username', 'first_name', 'last_name', 'email'],
        sortField: 'username',
        create: true,
        render: {
            option: function(item, escape) {
                return '<div>' +
                    (item.username ? '<span class="name">' + escape(item.username) + '</span>' : '') +
                    '<br>'+
                    (item.first_name ? '<span class="name">' + escape(item.first_name) + '&nbsp;</span>' : '') +
                    (item.last_name ? '<span class="name">' + escape(item.last_name) + '</span>' : '') +
                    (item.first_name || item.last_name? '<br>':'') +
                    (item.email ? '<span class="email">' + escape(item.email) + '</span>' : '') +
                '</div>';
            }
        },

        load: function(query, callback) {
            if (!query.length) return callback();
            $.ajax({
                url: '/classroom/api/v1/users/?format=json&q=' + encodeURIComponent(query),
                type: 'GET',
                error: function() {
                    console.log("hello");
                    error="cant fetch the suggestions";
                    callback(error);
                },
                success: function(res) {
                    callback(res.slice(0, 10));
                }
            });
        }
    });
});
// var app = angular.module('testApp', []);
// app.config(function($interpolateProvider) {
//     $interpolateProvider.startSymbol('[');
//     $interpolateProvider.endSymbol(']');
// });
// app.controller('testControl', function($scope, $http) {
//     $http.get("http://localhost:8000/classroom/api/v1/users/?format=json")
//         .then(function (response) {$scope.users = response.data;});
// });
</script>
{% endblock %}

{% block body %}
<div class="block" id="title-block">
    <a href="{% url 'classroom:user' %}">News Feeds</a>
    <h1>Notifica</h1>
    <p>
        Weekly Routine
    </p>
    <div id="test">
        <input class="typeahead" type="text" placeholder="users">
    </div>
</div>
<!-- <div ng-app="testApp" ng-controller="testControl">
    <ul>
        <li ng-repeat="x in users">
            [x.username]
        </li>
    </ul>
</div> -->
<div id="add-subject-dialog" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Modal Header</h4>
            </div>
            <div class="modal-body">
                <p>Some text in the modal.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="template-period hidden">
    <p class="subject">Project Management</p>
    <p class="teachers">Arun Timalsina, Sashidhar Joshi</p>
    <p class="remarks">Alt Week</p>
</div>
<div class="backdrop"></div>
<div class="add-subject-dialog">
    <div class="dialog-header">
        <h3>Add Period</h3>
    </div>
    <div class="dialog-content">
        <input class="input-subject" type="text" placeholder="Subject">
        <input class="input-teachers" type="text" placeholder="Teachers">
        <input class="input-remarks" type="text" placeholder="Remarks">
    </div>
    <div class="dialog-footer">
        <button class="btn-dlg-ok"><i class="fa fa-check"></i> Ok</button>
        <button class="btn-dlg-cancel"><i class="fa fa-times"></i> Cancel</button>
    </div>
</div>
<div class="block" id="routine-block">
    <div class="row row-heading">
        <div class="col-md-1">
            Day / Time
        </div>
        <div class="col-md-11">
        </div>
    </div>
    {% for day in days_short %}
    <div class="row">
        <div class="col-md-1">
            <p class="day-name">{{ day }}</p>
            <button class="btn-add-period"><i class="fa fa-plus"></i> Period</button>
        </div>
        <div class="col-md-11">
            <div class="periods">
            </div>
        </div>
    </div>
    {% endfor %}
{% endblock %}
